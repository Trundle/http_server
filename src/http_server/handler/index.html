



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
        <link rel="canonical" href="https://ponylang.github.io/http_server/src/http_server/handler/">
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../../assets/images/logo.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-ponylang-0.2.8">
    
    
      
        <title>Handler - http_server</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/application.b80b25f7.css">
      
    
    
      <script src="../../../assets/javascripts/modernizr.0b5df86e.js"></script>
    
    
      <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
          <a href="https://ponylang.github.io/http_server/" title="http_server" class="md-header-nav__button md-logo">
          
            <img src="../../../assets/images/logo.png" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                http_server
              </span>
              <span class="md-header-nav__topic">
                Handler
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <span class="md-nav__button md-logo">
      
        <img src="../../../assets/images/logo.png" width="48" height="48">
      
    </span>
    http_server
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../../.." title="http_server" class="md-nav__link">
      http_server
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      package http_server
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        package http_server
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server--index/" title="Package" class="md-nav__link">
      Package
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-URLPartUser/" title="primitive URLPartUser" class="md-nav__link">
      primitive URLPartUser
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-URLPartPassword/" title="primitive URLPartPassword" class="md-nav__link">
      primitive URLPartPassword
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-URLPartHost/" title="primitive URLPartHost" class="md-nav__link">
      primitive URLPartHost
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-URLPartPath/" title="primitive URLPartPath" class="md-nav__link">
      primitive URLPartPath
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-URLPartQuery/" title="primitive URLPartQuery" class="md-nav__link">
      primitive URLPartQuery
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-URLPartFragment/" title="primitive URLPartFragment" class="md-nav__link">
      primitive URLPartFragment
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-URLPart/" title="type URLPart" class="md-nav__link">
      type URLPart
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-URLEncode/" title="primitive URLEncode" class="md-nav__link">
      primitive URLEncode
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-URL/" title="class URL" class="md-nav__link">
      class URL
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-SyncHandler/" title="interface SyncHandler" class="md-nav__link">
      interface SyncHandler
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-SyncHandlerWrapper/" title="class SyncHandlerWrapper" class="md-nav__link">
      class SyncHandlerWrapper
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-Status/" title="interface Status" class="md-nav__link">
      interface Status
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-StatusContinue/" title="primitive StatusContinue" class="md-nav__link">
      primitive StatusContinue
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-StatusSwitchingProtocols/" title="primitive StatusSwitchingProtocols" class="md-nav__link">
      primitive StatusSwitchingProtocols
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-StatusOK/" title="primitive StatusOK" class="md-nav__link">
      primitive StatusOK
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-StatusCreated/" title="primitive StatusCreated" class="md-nav__link">
      primitive StatusCreated
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-StatusAccepted/" title="primitive StatusAccepted" class="md-nav__link">
      primitive StatusAccepted
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-StatusNonAuthoritativeInfo/" title="primitive StatusNonAuthoritativeInfo" class="md-nav__link">
      primitive StatusNonAuthoritativeInfo
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-StatusNoContent/" title="primitive StatusNoContent" class="md-nav__link">
      primitive StatusNoContent
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-StatusResetContent/" title="primitive StatusResetContent" class="md-nav__link">
      primitive StatusResetContent
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-StatusPartialContent/" title="primitive StatusPartialContent" class="md-nav__link">
      primitive StatusPartialContent
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-StatusMultipleChoices/" title="primitive StatusMultipleChoices" class="md-nav__link">
      primitive StatusMultipleChoices
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-StatusMovedPermanently/" title="primitive StatusMovedPermanently" class="md-nav__link">
      primitive StatusMovedPermanently
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-StatusFound/" title="primitive StatusFound" class="md-nav__link">
      primitive StatusFound
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-StatusSeeOther/" title="primitive StatusSeeOther" class="md-nav__link">
      primitive StatusSeeOther
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-StatusNotModified/" title="primitive StatusNotModified" class="md-nav__link">
      primitive StatusNotModified
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-StatusUseProxy/" title="primitive StatusUseProxy" class="md-nav__link">
      primitive StatusUseProxy
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-StatusTemporaryRedirect/" title="primitive StatusTemporaryRedirect" class="md-nav__link">
      primitive StatusTemporaryRedirect
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-StatusBadRequest/" title="primitive StatusBadRequest" class="md-nav__link">
      primitive StatusBadRequest
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-StatusUnauthorized/" title="primitive StatusUnauthorized" class="md-nav__link">
      primitive StatusUnauthorized
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-StatusPaymentRequired/" title="primitive StatusPaymentRequired" class="md-nav__link">
      primitive StatusPaymentRequired
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-StatusForbidden/" title="primitive StatusForbidden" class="md-nav__link">
      primitive StatusForbidden
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-StatusNotFound/" title="primitive StatusNotFound" class="md-nav__link">
      primitive StatusNotFound
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-StatusMethodNotAllowed/" title="primitive StatusMethodNotAllowed" class="md-nav__link">
      primitive StatusMethodNotAllowed
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-StatusNotAcceptable/" title="primitive StatusNotAcceptable" class="md-nav__link">
      primitive StatusNotAcceptable
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-StatusProxyAuthRequired/" title="primitive StatusProxyAuthRequired" class="md-nav__link">
      primitive StatusProxyAuthRequired
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-StatusRequestTimeout/" title="primitive StatusRequestTimeout" class="md-nav__link">
      primitive StatusRequestTimeout
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-StatusConflict/" title="primitive StatusConflict" class="md-nav__link">
      primitive StatusConflict
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-StatusGone/" title="primitive StatusGone" class="md-nav__link">
      primitive StatusGone
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-StatusLengthRequired/" title="primitive StatusLengthRequired" class="md-nav__link">
      primitive StatusLengthRequired
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-StatusPreconditionFailed/" title="primitive StatusPreconditionFailed" class="md-nav__link">
      primitive StatusPreconditionFailed
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-StatusRequestEntityTooLarge/" title="primitive StatusRequestEntityTooLarge" class="md-nav__link">
      primitive StatusRequestEntityTooLarge
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-StatusRequestURITooLong/" title="primitive StatusRequestURITooLong" class="md-nav__link">
      primitive StatusRequestURITooLong
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-StatusUnsupportedMediaType/" title="primitive StatusUnsupportedMediaType" class="md-nav__link">
      primitive StatusUnsupportedMediaType
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-StatusRequestedRangeNotSatisfiable/" title="primitive StatusRequestedRangeNotSatisfiable" class="md-nav__link">
      primitive StatusRequestedRangeNotSatisfiable
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-StatusExpectationFailed/" title="primitive StatusExpectationFailed" class="md-nav__link">
      primitive StatusExpectationFailed
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-StatusTeapot/" title="primitive StatusTeapot" class="md-nav__link">
      primitive StatusTeapot
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-StatusPreconditionRequired/" title="primitive StatusPreconditionRequired" class="md-nav__link">
      primitive StatusPreconditionRequired
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-StatusTooManyRequests/" title="primitive StatusTooManyRequests" class="md-nav__link">
      primitive StatusTooManyRequests
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-StatusRequestHeaderFieldsTooLarge/" title="primitive StatusRequestHeaderFieldsTooLarge" class="md-nav__link">
      primitive StatusRequestHeaderFieldsTooLarge
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-StatusUnavailableForLegalReasons/" title="primitive StatusUnavailableForLegalReasons" class="md-nav__link">
      primitive StatusUnavailableForLegalReasons
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-StatusInternalServerError/" title="primitive StatusInternalServerError" class="md-nav__link">
      primitive StatusInternalServerError
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-StatusNotImplemented/" title="primitive StatusNotImplemented" class="md-nav__link">
      primitive StatusNotImplemented
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-StatusBadGateway/" title="primitive StatusBadGateway" class="md-nav__link">
      primitive StatusBadGateway
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-StatusServiceUnavailable/" title="primitive StatusServiceUnavailable" class="md-nav__link">
      primitive StatusServiceUnavailable
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-StatusGatewayTimeout/" title="primitive StatusGatewayTimeout" class="md-nav__link">
      primitive StatusGatewayTimeout
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-StatusHTTPVersionNotSupported/" title="primitive StatusHTTPVersionNotSupported" class="md-nav__link">
      primitive StatusHTTPVersionNotSupported
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-StatusNetworkAuthenticationRequired/" title="primitive StatusNetworkAuthenticationRequired" class="md-nav__link">
      primitive StatusNetworkAuthenticationRequired
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-Session/" title="interface Session" class="md-nav__link">
      interface Session
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-ServerNotify/" title="interface ServerNotify" class="md-nav__link">
      interface ServerNotify
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-ServerConfig/" title="class ServerConfig" class="md-nav__link">
      class ServerConfig
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-Server/" title="actor Server" class="md-nav__link">
      actor Server
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-Response/" title="interface Response" class="md-nav__link">
      interface Response
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-Responses/" title="primitive Responses" class="md-nav__link">
      primitive Responses
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-ResponseBuilder/" title="interface ResponseBuilder" class="md-nav__link">
      interface ResponseBuilder
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-ResponseBuilderHeaders/" title="interface ResponseBuilderHeaders" class="md-nav__link">
      interface ResponseBuilderHeaders
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-ResponseBuilderBody/" title="interface ResponseBuilderBody" class="md-nav__link">
      interface ResponseBuilderBody
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-BuildableResponse/" title="class BuildableResponse" class="md-nav__link">
      class BuildableResponse
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-TooLarge/" title="primitive TooLarge" class="md-nav__link">
      primitive TooLarge
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-UnknownMethod/" title="primitive UnknownMethod" class="md-nav__link">
      primitive UnknownMethod
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-InvalidURI/" title="primitive InvalidURI" class="md-nav__link">
      primitive InvalidURI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-InvalidVersion/" title="primitive InvalidVersion" class="md-nav__link">
      primitive InvalidVersion
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-InvalidContentLength/" title="primitive InvalidContentLength" class="md-nav__link">
      primitive InvalidContentLength
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-InvalidTransferCoding/" title="primitive InvalidTransferCoding" class="md-nav__link">
      primitive InvalidTransferCoding
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-InvalidChunk/" title="primitive InvalidChunk" class="md-nav__link">
      primitive InvalidChunk
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-RequestParseError/" title="type RequestParseError" class="md-nav__link">
      type RequestParseError
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-NeedMore/" title="primitive NeedMore" class="md-nav__link">
      primitive NeedMore
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-ParseReturn/" title="type ParseReturn" class="md-nav__link">
      type ParseReturn
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-Chunked/" title="primitive Chunked" class="md-nav__link">
      primitive Chunked
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-HTTP11RequestHandler/" title="interface HTTP11RequestHandler" class="md-nav__link">
      interface HTTP11RequestHandler
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-HTTP11RequestParser/" title="class HTTP11RequestParser" class="md-nav__link">
      class HTTP11RequestParser
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-CompareCaseInsensitive/" title="primitive CompareCaseInsensitive" class="md-nav__link">
      primitive CompareCaseInsensitive
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-RequestID/" title="type RequestID" class="md-nav__link">
      type RequestID
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-RequestIDs/" title="primitive RequestIDs" class="md-nav__link">
      primitive RequestIDs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-HTTP11/" title="primitive HTTP11" class="md-nav__link">
      primitive HTTP11
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-HTTP10/" title="primitive HTTP10" class="md-nav__link">
      primitive HTTP10
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-HTTP09/" title="primitive HTTP09" class="md-nav__link">
      primitive HTTP09
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-Version/" title="type Version" class="md-nav__link">
      type Version
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-Request/" title="interface Request" class="md-nav__link">
      interface Request
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-BuildableRequest/" title="class BuildableRequest" class="md-nav__link">
      class BuildableRequest
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-MimeTypes/" title="primitive MimeTypes" class="md-nav__link">
      primitive MimeTypes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-Method/" title="interface Method" class="md-nav__link">
      interface Method
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-CONNECT/" title="primitive CONNECT" class="md-nav__link">
      primitive CONNECT
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-GET/" title="primitive GET" class="md-nav__link">
      primitive GET
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-DELETE/" title="primitive DELETE" class="md-nav__link">
      primitive DELETE
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-HEAD/" title="primitive HEAD" class="md-nav__link">
      primitive HEAD
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-OPTIONS/" title="primitive OPTIONS" class="md-nav__link">
      primitive OPTIONS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-PATCH/" title="primitive PATCH" class="md-nav__link">
      primitive PATCH
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-POST/" title="primitive POST" class="md-nav__link">
      primitive POST
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-PUT/" title="primitive PUT" class="md-nav__link">
      primitive PUT
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-TRACE/" title="primitive TRACE" class="md-nav__link">
      primitive TRACE
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-Methods/" title="primitive Methods" class="md-nav__link">
      primitive Methods
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-Header/" title="type Header" class="md-nav__link">
      type Header
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-Headers/" title="class Headers" class="md-nav__link">
      class Headers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-Handler/" title="interface Handler" class="md-nav__link">
      interface Handler
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-HandlerFactory/" title="interface HandlerFactory" class="md-nav__link">
      interface HandlerFactory
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-HandlerWithoutContext/" title="interface HandlerWithoutContext" class="md-nav__link">
      interface HandlerWithoutContext
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../http_server-SimpleHandlerFactory/" title="primitive SimpleHandlerFactory" class="md-nav__link">
      primitive SimpleHandlerFactory
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  <h1>Handler</h1>
                
                <pre><code class="language-pony-full-source">interface Handler
  &quot;&quot;&quot;
  This is the interface through which HTTP requests are delivered *to*
  application code and through which HTTP responses are sent to the underlying connection.

  Instances of a Handler are executed in the context of the `Session` actor so most of them should be
  passing data on to a processing actor.

  Each `Session` must have a unique instance of the handler. The
  application code does not necessarily know when an `Session` is created,
  so the application must provide an instance of `HandlerFactory` that
  will be called at the appropriate time.

  ### Receiving Requests

  When an [Request](http_server-Request.md) is received on an [Session](http_server-Session.md) actor,
  the corresponding [Handler.apply](http_server-Handler.md#apply) method is called
  with the request and a [RequestID](http_server-RequestID). The [Request](http_server-Request.md)
  contains the information extracted from HTTP Headers and the Request Line, but it does not
  contain any body data. It is sent to [Handler.apply](http_server-Handler.md#apply) before the body
  is fully received.

  If the request has a body, its raw data is sent to the [Handler.chunk](http_server-Handler.md#chunk) method
  together with the [RequestID](http_server-RequestID.md) of the request it belongs to.

  Once all body data is received, [Handler.finished](http_server-Handler.md#finished) is called with the
  [RequestID](http_server-RequestID.md) of the request it belongs to. Now is the time to act on the full body data,
  if it hasn't been processed yet.

  The [RequestID](http_server-Requestid.md) must be kept around for sending the response for this request.
  This way the session can ensure, all responses are sent in the same order as they have been received,
  which is required for HTTP pipelining. This way processing responses can be passed to other actors and
  processing can take arbitrary times. The [Session](http_server-Session.md) will take care of sending
  the responses in the correct order.

  It is guaranteed that the call sequence is always:

  - exactly once:       `apply(request_n, requestid_n)`
  - zero or more times: `chunk(data, requestid_n)`
  - exactly once:       `finished(requestid_n)`

  And so on for `requestid_(n + 1)`. Only after `finished` has been called for a
  `RequestID`, the next request will be received by the Handler instance, there will
  be no interleaving. So it is save to keep state for the given request in a Handler between calls to `apply`
  and `finished`.

  #### Failures and Cancelling

  If a [Session](http_server-Session.md) experienced faulty requests, the [Handler](http_server-Handler.md)
  is notified via [Handler.failed](http_server-Handler.md#failed).

  If the underlying connection to a [Session](http_server-Session.md) has been closed,
  the [Handler](http_server-Handler.md) is notified via [Handler.closed](http_server-Handler.md#closed).

  ### Sending Responses

  A handler is instantiated using a [HandlerFactory](http_server-HandlerFactory.md), which passes an instance of
  [Session](http_server-Session.md) to be used in constructing a handler.

  A Session is required to be able to send responses.
  See the docs for [Session](http_server-Session.md) for ways to send responses.

  Example Handler:

  ```pony
  use &quot;http&quot;
  use &quot;valbytes&quot;

  class MyHandler is Handler
    let _session: Session

    var _path: String = &quot;&quot;
    var _body: ByteArrays = ByteArrays

    new create(session: Session) =&gt;
      _session = session

    fun ref apply(request: Request val, request_id: RequestID): Any =&gt;
      _path = request.uri().path

    fun ref chunk(data: ByteSeq val, request_id: RequestID) =&gt;
      _body = _body + data

    fun ref finished(request_id: RequestID) =&gt;
      _session.send_raw(
        Responses.builder()
          .set_status(StatusOk)
          .add_header(&quot;Content-Length&quot;, (_body.size() + _path.size() + 13).string())
          .add_header(&quot;Content-Type&quot;, &quot;text/plain&quot;)
          .finish_headers()
          .add_chunk(&quot;received &quot;)
          .add_chunk((_body = ByteArrays).array())
          .add_chunk(&quot; at &quot;)
          .add_chunk(_path)
          .build(),
        request_id
      )
      _session.send_finished(request_id)
  ```

  &quot;&quot;&quot;
  fun ref apply(request: Request val, request_id: RequestID): Any =&gt;
    &quot;&quot;&quot;
    Notification of an incoming message.

    Only one HTTP message will be processed at a time, and that starts
    with a call to this method.
    &quot;&quot;&quot;

  fun ref chunk(data: ByteSeq val, request_id: RequestID) =&gt;
    &quot;&quot;&quot;
    Notification of incoming body data. The body belongs to the most
    recent `Request` delivered by an `apply` notification.
    &quot;&quot;&quot;

  fun ref finished(request_id: RequestID) =&gt;
    &quot;&quot;&quot;
    Notification that no more body chunks are coming. Delivery of this HTTP
    message is complete.
    &quot;&quot;&quot;

  fun ref cancelled(request_id: RequestID) =&gt;
    &quot;&quot;&quot;
    Notification that sending a response has been cancelled locally,
    e.g. by closing the server or manually cancelling a single request.
    &quot;&quot;&quot;

  fun ref failed(reason: RequestParseError, request_id: RequestID) =&gt;
    &quot;&quot;&quot;
    Notification about failure parsing HTTP requests.
    &quot;&quot;&quot;

  fun ref closed() =&gt;
    &quot;&quot;&quot;
    Notification that the underlying connection has been closed.
    &quot;&quot;&quot;

  fun ref throttled() =&gt;
    &quot;&quot;&quot;
    Notification that the session temporarily can not accept more data.
    &quot;&quot;&quot;

  fun ref unthrottled() =&gt;
    &quot;&quot;&quot;
    Notification that the session can resume accepting data.
    &quot;&quot;&quot;


interface HandlerFactory
  &quot;&quot;&quot;
  The TCP connections that underlie HTTP sessions get created within
  the `http` package at times that the application code can not
  predict. Yet, the application code has to provide custom hooks into
  these connections as they are created. To accomplish this, the
  application code provides an instance of a `class` that implements
  this interface.

  The `HandlerFactory.apply` method will be called when a new
  `Session` is created, giving the application a chance to create
  an instance of its own `Handler`. This happens on both
  client and server ends.
  &quot;&quot;&quot;

  fun apply(session: Session): Handler ref^
    &quot;&quot;&quot;
    Called by the [Session](http_server-Session.md) when it needs a new instance of the
    application's [Handler](http_server-Handler.md). It is suggested that the
    `session` value be passed to the constructor for the new
    [Handler](http_server-Handler.md), you will need it for sending stuff back.

    This part must be implemented, as there might be more paramaters
    that need to be passed for creating a Handler.
    &quot;&quot;&quot;

interface HandlerWithoutContext is Handler
  &quot;&quot;&quot;
  Simple [Handler](http_server-Handler.md) that can be constructed
  with only a Session.
  &quot;&quot;&quot;
  new create(session: Session)


primitive SimpleHandlerFactory[T: HandlerWithoutContext]
  &quot;&quot;&quot;
  HandlerFactory for a HandlerWithoutContext.

  Just create it like:

  ```pony
  let server =
    Server(
      ...,
      SimpleHandlerFactory[MySimpleHandler],
      ...
    )
  ```

  &quot;&quot;&quot;
  fun apply(session: Session): Handler ref^ =&gt;
    T.create(session)

</code></pre>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
    <script src="../../../assets/javascripts/application.cb37bb38.js"></script>
      
      <script>app.initialize({version:"1.1.2",url:{base:"../../.."}})</script>
      
    
    
      
    
  </body>
</html>